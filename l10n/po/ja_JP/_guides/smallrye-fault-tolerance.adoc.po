# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
msgid ""
msgstr ""
"Project-Id-Version: \n"
"POT-Creation-Date: 2022-05-11 10:12+0000\n"
"PO-Revision-Date: 2021-04-09 20:10+0900\n"
"Last-Translator: \n"
"Language-Team: \n"
"Language: ja\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"X-Generator: Poedit 2.4.2\n"

#. This guide is maintained in the main Quarkus repository
#. and pull requests should be submitted there:
#. https://github.com/quarkusio/quarkus/tree/main/docs/src/main/asciidoc
#. type: Title =
#: upstream/_guides/smallrye-fault-tolerance.adoc:6
#, fuzzy, no-wrap
msgid "SmallRye Fault Tolerance"
msgstr "SmallRyeのフォールト・トレランス"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:15
msgid "One of the challenges brought by the distributed nature of microservices is that communication with external systems is inherently unreliable. This increases demand on resiliency of applications. To simplify making more resilient applications, Quarkus provides https://github.com/smallrye/smallrye-fault-tolerance/[SmallRye Fault Tolerance] an implementation of the https://github.com/eclipse/microprofile-fault-tolerance/[MicroProfile Fault Tolerance] specification."
msgstr "マイクロサービスの分散した性質がもたらす課題の1つは、外部システムとの通信が本質的に信頼できないことです。これにより、アプリケーションの耐障害性に対する要求が高まります。耐障害性の高いアプリケーションを簡単に作るために、Quarkusは link:https://github.com/eclipse/microprofile-fault-tolerance/[MicroProfile Fault Tolerance]仕様の実装である link:https://github.com/smallrye/smallrye-fault-tolerance/[SmallRye Fault Tolerance]を提供します。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:18
msgid "In this guide, we demonstrate usage of MicroProfile Fault Tolerance annotations such as `@Timeout`, `@Fallback`, `@Retry` and `@CircuitBreaker`."
msgstr "このガイドでは、 `@Timeout` 、 `@Fallback` 、 `@Retry` 、 `@CircuitBreaker` などの MicroProfile Fault Tolerance アノテーションの使用方法を説明します。"

#. type: Title ==
#: upstream/_guides/smallrye-fault-tolerance.adoc:19
#, no-wrap
msgid "Prerequisites"
msgstr "前提条件"

#. type: Title ==
#: upstream/_guides/smallrye-fault-tolerance.adoc:23
#, no-wrap
msgid "The Scenario"
msgstr "シナリオ"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:27
msgid "The application built in this guide simulates a simple backend for a gourmet coffee e-shop. It implements a REST endpoint providing information about coffee samples we have on store."
msgstr "このガイドで作成したアプリケーションは、グルメ・コーヒーのe-ショップのシンプルなバックエンドをシミュレートしています。このアプリケーションは、店舗で販売しているコーヒーのサンプルに関する情報を提供するRESTエンドポイントを実装しています。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:30
msgid "Let's imagine, although it's not implemented as such, that some of the methods in our endpoint require communication to external services like a database or an external microservice, which introduces a factor of unreliability."
msgstr "そのようには実装されていませんが、エンドポイントの一部のメソッドが、データベースや外部のマイクロサービスなどの外部サービスとの通信を必要とし、それによって信頼性の低い要素が導入されていることを想像してみましょう。"

#. type: Title ==
#: upstream/_guides/smallrye-fault-tolerance.adoc:31
#, no-wrap
msgid "Solution"
msgstr "ソリューション"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:35
msgid "We recommend that you follow the instructions in the next sections and create the application step by step.  However, you can go right to the completed example."
msgstr "次のセクションで紹介する手順に沿って、ステップを踏んでアプリを作成することをお勧めします。ただし、完成した例にそのまま進んでも構いません。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:37
msgid "Clone the Git repository: `git clone {quickstarts-clone-url}`, or download an {quickstarts-archive-url}[archive]."
msgstr "Gitレポジトリをクローンするか `git clone {quickstarts-clone-url}` 、 {quickstarts-archive-url}[アーカイブ] をダウンロードします。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:39
msgid "The solution is located in the `microprofile-fault-tolerance-quickstart` {quickstarts-tree-url}/microprofile-fault-tolerance-quickstart[directory]."
msgstr "ソリューションは `microprofile-fault-tolerance-quickstart` {quickstarts-tree-url}/microprofile-fault-tolerance-quickstart[ディレクトリ] にあります。"

#. type: Title ==
#: upstream/_guides/smallrye-fault-tolerance.adoc:40
#, no-wrap
msgid "Creating the Maven Project"
msgstr "Mavenプロジェクトの作成"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:43
msgid "First, we need a new project. Create a new project with the following command:"
msgstr "まず、新しいプロジェクトが必要です。以下のコマンドで新規プロジェクトを作成します。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:49
#, fuzzy
msgid "This command generates a project, importing the extensions for RESTEasy Reactive/JAX-RS and SmallRye Fault Tolerance."
msgstr "このコマンドは、RESTEasy/JAX-RSとSmallRye Fault ToleranceのエクステンションをインポートしたMaven構造を生成します。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:52
msgid "If you already have your Quarkus project configured, you can add the `smallrye-fault-tolerance` extension to your project by running the following command in your project base directory:"
msgstr "すでにQuarkusプロジェクトが設定されている場合は、プロジェクトのベースディレクトリーで以下のコマンドを実行することで、プロジェクトに `smallrye-fault-tolerance` エクステンションを追加することができます。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:57
#, fuzzy
msgid "This will add the following to your build file:"
msgstr "これにより、 `pom.xml` に以下が追加されます:"

#. type: Block title
#: upstream/_guides/smallrye-fault-tolerance.adoc:59
#: upstream/_guides/smallrye-fault-tolerance.adoc:485
#, no-wrap
msgid "pom.xml"
msgstr "pom.xml"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:65
#: upstream/_guides/smallrye-fault-tolerance.adoc:491
#, no-wrap
msgid ""
"<dependency>\n"
"    <groupId>io.quarkus</groupId>\n"
"    <artifactId>quarkus-smallrye-fault-tolerance</artifactId>\n"
"</dependency>\n"
msgstr ""

#. type: Block title
#: upstream/_guides/smallrye-fault-tolerance.adoc:68
#: upstream/_guides/smallrye-fault-tolerance.adoc:494
#, no-wrap
msgid "build.gradle"
msgstr "build.gradle"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:71
#: upstream/_guides/smallrye-fault-tolerance.adoc:497
#, no-wrap
msgid "implementation(\"io.quarkus:quarkus-smallrye-fault-tolerance\")\n"
msgstr ""

#. type: Title ==
#: upstream/_guides/smallrye-fault-tolerance.adoc:73
#, no-wrap
msgid "Preparing an Application: REST Endpoint and CDI Bean"
msgstr "アプリケーションの準備: RESTエンドポイントとCDI Bean"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:77
msgid "In this section we create a skeleton of our application, so that we have something that we can extend and to which we can add fault tolerance features later on."
msgstr "このセクションでは、アプリケーションのスケルトン (骨組) を作成します。これにより、後から拡張したり、フォールトトレランス機能を追加したりすることができます。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:79
msgid "First, create a simple entity representing a coffee sample in our store:"
msgstr "まず、お店のコーヒーサンプルを表すシンプルなエンティティを作成します。"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:83
#: upstream/_guides/smallrye-fault-tolerance.adoc:108
#: upstream/_guides/smallrye-fault-tolerance.adoc:153
#, no-wrap
msgid "package org.acme.microprofile.faulttolerance;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:85
#, no-wrap
msgid "public class Coffee {\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:90
#, no-wrap
msgid ""
"    public Integer id;\n"
"    public String name;\n"
"    public String countryOfOrigin;\n"
"    public Integer price;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:93
#, no-wrap
msgid ""
"    public Coffee() {\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:101
#, no-wrap
msgid ""
"    public Coffee(Integer id, String name, String countryOfOrigin, Integer price) {\n"
"        this.id = id;\n"
"        this.name = name;\n"
"        this.countryOfOrigin = countryOfOrigin;\n"
"        this.price = price;\n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:104
msgid "Let's continue with a simple CDI bean, that would work as a repository of our coffee samples."
msgstr "続いて、コーヒーのサンプルのrepositoryとして動作するシンプルなCDIビーンです。"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:116
#, no-wrap
msgid ""
"import java.util.ArrayList;\n"
"import java.util.Collections;\n"
"import java.util.HashMap;\n"
"import java.util.List;\n"
"import java.util.Map;\n"
"import java.util.stream.Collectors;\n"
"import javax.enterprise.context.ApplicationScoped;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:119
#, no-wrap
msgid ""
"@ApplicationScoped\n"
"public class CoffeeRepositoryService {\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:121
#, no-wrap
msgid "    private Map<Integer, Coffee> coffeeList = new HashMap<>();\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:127
#, no-wrap
msgid ""
"    public CoffeeRepositoryService() {\n"
"        coffeeList.put(1, new Coffee(1, \"Fernandez Espresso\", \"Colombia\", 23));\n"
"        coffeeList.put(2, new Coffee(2, \"La Scala Whole Beans\", \"Bolivia\", 18));\n"
"        coffeeList.put(3, new Coffee(3, \"Dak Lak Filter\", \"Vietnam\", 25));\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:131
#, no-wrap
msgid ""
"    public List<Coffee> getAllCoffees() {\n"
"        return new ArrayList<>(coffeeList.values());\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:135
#, no-wrap
msgid ""
"    public Coffee getCoffeeById(Integer id) {\n"
"        return coffeeList.get(id);\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:146
#, no-wrap
msgid ""
"    public List<Coffee> getRecommendations(Integer id) {\n"
"        if (id == null) {\n"
"            return Collections.emptyList();\n"
"        }\n"
"        return coffeeList.values().stream()\n"
"                .filter(coffee -> !id.equals(coffee.id))\n"
"                .limit(2)\n"
"                .collect(Collectors.toList());\n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:149
#, fuzzy
msgid "Finally, create the `org.acme.microprofile.faulttolerance.CoffeeResource` class as follows:"
msgstr "最後に、 `org.acme.microprofile.faulttolerance.CoffeeResource` クラスを以下のように編集します。"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:160
#, no-wrap
msgid ""
"import java.util.List;\n"
"import java.util.Random;\n"
"import java.util.concurrent.atomic.AtomicLong;\n"
"import javax.inject.Inject;\n"
"import javax.ws.rs.GET;\n"
"import javax.ws.rs.Path;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:162
#, no-wrap
msgid "import org.jboss.logging.Logger;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:165
#, no-wrap
msgid ""
"@Path(\"/coffee\")\n"
"public class CoffeeResource {\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:167
#, no-wrap
msgid "    private static final Logger LOGGER = Logger.getLogger(CoffeeResource.class);\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:170
#, no-wrap
msgid ""
"    @Inject\n"
"    CoffeeRepositoryService coffeeRepository;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:172
#: upstream/_guides/smallrye-fault-tolerance.adoc:365
#, no-wrap
msgid "    private AtomicLong counter = new AtomicLong(0);\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:176
#, no-wrap
msgid ""
"    @GET\n"
"    public List<Coffee> coffees() {\n"
"        final Long invocationNumber = counter.getAndIncrement();\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:178
#, no-wrap
msgid "        maybeFail(String.format(\"CoffeeResource#coffees() invocation #%d failed\", invocationNumber));\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:182
#, no-wrap
msgid ""
"        LOGGER.infof(\"CoffeeResource#coffees() invocation #%d returning successfully\", invocationNumber);\n"
"        return coffeeRepository.getAllCoffees();\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:190
#, no-wrap
msgid ""
"    private void maybeFail(String failureLogMessage) {\n"
"        if (new Random().nextBoolean()) {\n"
"            LOGGER.error(failureLogMessage);\n"
"            throw new RuntimeException(\"Resource failure.\");\n"
"        }\n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:195
msgid "At this point, we expose a single REST method that will show a list of coffee samples in a JSON format. Note that we introduced some fault making code in our `CoffeeResource#maybeFail()` method, which is going to cause failures in the `CoffeeResource#coffees()` endpoint method in about 50 % of requests."
msgstr "この時点で、コーヒーのサンプルのリストをJSON形式で表示するRESTメソッドを1つ公開しています。なお、 `CoffeeResource#maybeFail()` メソッドに障害を起こすコードを導入したため、約50%のリクエストで `CoffeeResource#coffees()` エンドポイント・メソッドに障害が発生することになります。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:197
msgid "Why not check that our application works? Run the Quarkus development server with:"
msgstr "アプリケーションが動作することを確認してみましょう。次のようにQuarkusの開発サーバーを起動してください。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:203
msgid "and open `http://localhost:8080/coffee` in your browser. Make couple of requests (remember, some of them we expect to fail). At least some of the requests should show us the list of our coffee samples in JSON, the rest will fail with a `RuntimeException` thrown in `CoffeeResource#maybeFail()`."
msgstr "`http://localhost:8080/coffee`をブラウザで開きます。いくつかのリクエストを行います（いくつかのリクエストは失敗することを想定しています）。少なくともいくつかのリクエストは、コーヒーサンプルのリストをJSONで表示してくれるはずです。残りのリクエストは、 `RuntimeException` thrown in `CoffeeResource#maybeFail()` で失敗します。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:205
msgid "Congratulations, you've just made a working (although somewhat unreliable) Quarkus application!"
msgstr "おめでとうございます！（多少信頼性に欠けるものの）Quarkusアプリケーションが完成しました。"

#. type: Title ==
#: upstream/_guides/smallrye-fault-tolerance.adoc:206
#, no-wrap
msgid "Adding Resiliency: Retries"
msgstr "レジリエンスの追加: リトライ"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:210
msgid "Let the Quarkus development server running and in your IDE add the `@Retry` annotation to the `CoffeeResource#coffees()` method as follows and save the file:"
msgstr "Quarkus開発サーバーを起動し、IDEで `@Retry` アノテーションを `CoffeeResource#coffees()` メソッドに以下のように追加し、ファイルを保存します。"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:215
#: upstream/_guides/smallrye-fault-tolerance.adoc:450
#, no-wrap
msgid ""
"import org.eclipse.microprofile.faulttolerance.Retry;\n"
"...\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:225
#: upstream/_guides/smallrye-fault-tolerance.adoc:460
#, no-wrap
msgid ""
"public class CoffeeResource {\n"
"    ...\n"
"    @GET\n"
"    @Retry(maxRetries = 4)\n"
"    public List<Coffee> coffees() {\n"
"        ...\n"
"    }\n"
"    ...\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:229
msgid "Hit refresh in your browser. The Quarkus development server will automatically detect the changes and recompile the app for you, so there's no need to restart it."
msgstr "ブラウザの更新ボタンを押してください。Quarkus開発サーバーが自動的に変更を検出し、アプリを再コンパイルしますので、再起動する必要はありません。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:233
msgid "You can hit refresh couple more times. Practically all requests should now be succeeding. The `CoffeeResource#coffees()` method is still in fact failing in about 50 % of time, but every time it happens, the platform will automatically retry the call!"
msgstr "さらに何度か更新ボタンを押してみてください。実質的にすべてのリクエストが成功しているはずです。 `CoffeeResource#coffees()` メソッドは、実際にはまだ約50％の確率で失敗していますが、そのたびにプラットフォームは自動的に呼び出しを再試行します。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:236
msgid "To see that that the failures still happen, check the output of the development server. The log messages should be similar to these:"
msgstr "障害がまだ発生していることを確認するには、開発サーバーの出力をチェックします。ログメッセージは以下のようになっているはずです。"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:244
#, no-wrap
msgid ""
"2019-03-06 12:17:41,725 INFO  [org.acm.fau.CoffeeResource] (XNIO-1 task-1) CoffeeResource#coffees() invocation #5 returning successfully\n"
"2019-03-06 12:17:44,187 INFO  [org.acm.fau.CoffeeResource] (XNIO-1 task-1) CoffeeResource#coffees() invocation #6 returning successfully\n"
"2019-03-06 12:17:45,166 ERROR [org.acm.fau.CoffeeResource] (XNIO-1 task-1) CoffeeResource#coffees() invocation #7 failed\n"
"2019-03-06 12:17:45,172 ERROR [org.acm.fau.CoffeeResource] (XNIO-1 task-1) CoffeeResource#coffees() invocation #8 failed\n"
"2019-03-06 12:17:45,176 INFO  [org.acm.fau.CoffeeResource] (XNIO-1 task-1) CoffeeResource#coffees() invocation #9 returning successfully\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:249
msgid "You can see that every time an invocation fails, it's immediately followed by another invocation, until one succeeds.  Since we allowed 4 retries, it would require 5 invocations to fail in a row, in order for the user to be actually exposed to a failure. Which is fairly unlikely to happen."
msgstr "呼び出しが失敗するたびに、すぐに次の呼び出しが行われ、1つが成功するまで繰り返されることがわかります。4回の再試行を許可しているので、ユーザーが実際に失敗にさらされるためには、5回連続して失敗する必要があります。これはかなり起こりにくいことです。"

#. type: Title ==
#: upstream/_guides/smallrye-fault-tolerance.adoc:250
#, no-wrap
msgid "Adding Resiliency: Timeouts"
msgstr "レジリエンスの追加: タイムアウト"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:253
msgid "So what else have we got in MicroProfile Fault Tolerance? Let's look into timeouts."
msgstr "では、MicroProfile Fault Toleranceには他に何があるのでしょうか。タイムアウトについて見てみましょう。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:256
msgid "Add following two methods to our `CoffeeResource` endpoint. Again, no need to restart the server, just paste the code and save the file."
msgstr "`CoffeeResource` のエンドポイントに以下の2つのメソッドを追加します。繰り返しになりますが、サーバーを再起動する必要はなく、コードを貼り付けてファイルを保存するだけです。"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:269
#, no-wrap
msgid ""
"import org.eclipse.microprofile.faulttolerance.Timeout;\n"
"...\n"
"public class CoffeeResource {\n"
"    ...\n"
"    @GET\n"
"    @Path(\"/{id}/recommendations\")\n"
"    @Timeout(250)\n"
"    public List<Coffee> recommendations(int id) {\n"
"        long started = System.currentTimeMillis();\n"
"        final long invocationNumber = counter.getAndIncrement();\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:280
#, no-wrap
msgid ""
"        try {\n"
"            randomDelay();\n"
"            LOGGER.infof(\"CoffeeResource#recommendations() invocation #%d returning successfully\", invocationNumber);\n"
"            return coffeeRepository.getRecommendations(id);\n"
"        } catch (InterruptedException e) {\n"
"            LOGGER.errorf(\"CoffeeResource#recommendations() invocation #%d timed out after %d ms\",\n"
"                    invocationNumber, System.currentTimeMillis() - started);\n"
"            return null;\n"
"        }\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:285
#, no-wrap
msgid ""
"    private void randomDelay() throws InterruptedException {\n"
"        Thread.sleep(new Random().nextInt(500));\n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:291
msgid "We added some new functionality. We want to be able to recommend some related coffees based on a coffee that a user is currently looking at. It's not a critical functionality, it's a nice-to-have. When the system is overloaded and the logic behind obtaining recommendations takes too long to execute, we would rather time out and render the UI without recommendations."
msgstr "いくつかの新しい機能を追加しました。ユーザーが現在見ているコーヒーに基づいて、関連するコーヒーをお勧めできるようにしたいのです。これは重要な機能ではなく、あれば望ましい機能です。システムに負荷がかかり、おすすめ情報を得るためのロジックの実行に時間がかかりすぎる場合は、むしろタイムアウトしておすすめ情報のないUIを表示したいと考えています。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:294
msgid "Note that the timeout was configured to 250 ms, and a random artificial delay between 0 to 500 ms was introduced into the `CoffeeResource#recommendations()` method."
msgstr "なお、タイムアウトは250msに設定し、0～500msのランダムな人工的な遅延を `CoffeeResource#recommendations()` メソッドに導入しました。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:296
msgid "In your browser, go to `http://localhost:8080/coffee/2/recommendations` and hit refresh a couple of times."
msgstr "お使いのブラウザで `http://localhost:8080/coffee/2/recommendations` にアクセスして、2、3回更新してください。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:299
msgid "You should see some requests time out with `org.eclipse.microprofile.faulttolerance.exceptions.TimeoutException`.  Requests that do not time out should show two recommended coffee samples in JSON."
msgstr "`org.eclipse.microprofile.faulttolerance.exceptions.TimeoutException` でいくつかのリクエストがタイムアウトになるはずです。タイムアウトにならなかったリクエストでは、JSONに2つのおすすめコーヒーサンプルが表示されます。"

#. type: Title ==
#: upstream/_guides/smallrye-fault-tolerance.adoc:300
#, no-wrap
msgid "Adding Resiliency: Fallbacks"
msgstr "レジリエンスの追加: フォールバック"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:304
msgid "Let's make our recommendations feature even better by providing a fallback (and presumably faster) way of getting related coffees."
msgstr "関連するコーヒーを入手するための代替手段（おそらくより迅速な方法）を提供することで、おすすめ機能をさらに改善しましょう。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:307
msgid "Add a fallback method to `CoffeeResource` and a `@Fallback` annotation to `CoffeeResource#recommendations()` method as follows:"
msgstr "`CoffeeResource` にフォールバック・メソッドを、 `CoffeeResource#recommendations()` メソッドに `@Fallback` アノテーションを以下のように追加します。"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:312
#, no-wrap
msgid ""
"import java.util.Collections;\n"
"import org.eclipse.microprofile.faulttolerance.Fallback;\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:320
#, no-wrap
msgid ""
"...\n"
"public class CoffeeResource {\n"
"    ...\n"
"    @Fallback(fallbackMethod = \"fallbackRecommendations\")\n"
"    public List<Coffee> recommendations(int id) {\n"
"        ...\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:328
#, no-wrap
msgid ""
"    public List<Coffee> fallbackRecommendations(int id) {\n"
"        LOGGER.info(\"Falling back to RecommendationResource#fallbackRecommendations()\");\n"
"        // safe bet, return something that everybody likes\n"
"        return Collections.singletonList(coffeeRepository.getCoffeeById(1));\n"
"    }\n"
"    ...\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:334
msgid "Hit refresh several times on `http://localhost:8080/coffee/2/recommendations`.  The `TimeoutException` should not appear anymore. Instead, in case of a timeout, the page will display a single recommendation that we hardcoded in our fallback method `fallbackRecommendations()`, rather than two recommendations returned by the original method."
msgstr "`http://localhost:8080/coffee/2/recommendations` を何回も更新してください。 `TimeoutException` はもう表示されないはずです。代わりに、タイムアウトが発生した場合、元のメソッドが返す2つのレコメンデーションではなく、フォールバックメソッド `fallbackRecommendations()` にハードコードされた1つのレコメンデーションが表示されます。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:336
msgid "Check the server output to see that fallback is really happening:"
msgstr "フォールバックが本当に行われているかどうか、サーバーの出力を確認してください。"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:342
#, no-wrap
msgid ""
"2020-01-09 13:21:34,250 INFO  [org.acm.fau.CoffeeResource] (executor-thread-1) CoffeeResource#recommendations() invocation #1 returning successfully\n"
"2020-01-09 13:21:36,354 ERROR [org.acm.fau.CoffeeResource] (executor-thread-1) CoffeeResource#recommendations() invocation #2 timed out after 250 ms\n"
"2020-01-09 13:21:36,355 INFO  [org.acm.fau.CoffeeResource] (executor-thread-1) Falling back to RecommendationResource#fallbackRecommendations()\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:345
msgid "The fallback method is required to have the same parameters as the original method."
msgstr "フォールバックメソッドには、元のメソッドと同じパラメータが必要です。"

#. type: Title ==
#: upstream/_guides/smallrye-fault-tolerance.adoc:346
#, no-wrap
msgid "Adding Resiliency: Circuit Breaker"
msgstr "レジリエンスの追加: サーキットブレーカー"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:352
msgid "A circuit breaker is useful for limiting number of failures happening in the system, when part of the system becomes temporarily unstable. The circuit breaker records successful and failed invocations of a method, and when the ratio of failed invocations reaches the specified threshold, the circuit breaker _opens_ and blocks all further invocations of that method for a given time."
msgstr "サーキットブレーカーは，システムの一部が一時的に不安定になったときに，システム内で発生する障害の数を制限するのに有効です。サーキットブレーカーは、あるメソッドの成功と失敗を記録し、失敗したメソッドの割合が指定された閾値に達すると、サーキットブレーカーが _開き_、それ以降のメソッドの呼び出しを一定時間ブロックします。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:354
msgid "Add the following code into the `CoffeeRepositoryService` bean, so that we can demonstrate a circuit breaker in action:"
msgstr "次のコードを `CoffeeRepositoryService` ビーンに追加して、サーキットブレーカーの動作をデモできるようにします。"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:360
#, no-wrap
msgid ""
"import java.util.concurrent.atomic.AtomicLong;\n"
"import org.eclipse.microprofile.faulttolerance.CircuitBreaker;\n"
"...\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:363
#, no-wrap
msgid ""
"public class CoffeeRepositoryService {\n"
"    ...\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:371
#, no-wrap
msgid ""
"    @CircuitBreaker(requestVolumeThreshold = 4)\n"
"    public Integer getAvailability(Coffee coffee) {\n"
"        maybeFail();\n"
"        return new Random().nextInt(30);\n"
"    }\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:380
#, no-wrap
msgid ""
"    private void maybeFail() {\n"
"        // introduce some artificial failures\n"
"        final Long invocationNumber = counter.getAndIncrement();\n"
"        if (invocationNumber % 4 > 1) { // alternate 2 successful and 2 failing invocations\n"
"            throw new RuntimeException(\"Service failed.\");\n"
"        }\n"
"    }\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:383
msgid "And inject the code below into the `CoffeeResource` endpoint:"
msgstr "そして、以下のコードを `CoffeeResource` のエンドポイントに注入します。"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:392
#, no-wrap
msgid ""
"public class CoffeeResource {\n"
"    ...\n"
"    @Path(\"/{id}/availability\")\n"
"    @GET\n"
"    public Response availability(int id) {\n"
"        final Long invocationNumber = counter.getAndIncrement();\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:398
#, no-wrap
msgid ""
"        Coffee coffee = coffeeRepository.getCoffeeById(id);\n"
"        // check that coffee with given id exists, return 404 if not\n"
"        if (coffee == null) {\n"
"            return Response.status(Response.Status.NOT_FOUND).build();\n"
"        }\n"
msgstr ""

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:414
#, no-wrap
msgid ""
"        try {\n"
"            Integer availability = coffeeRepository.getAvailability(coffee);\n"
"            LOGGER.infof(\"CoffeeResource#availability() invocation #%d returning successfully\", invocationNumber);\n"
"            return Response.ok(availability).build();\n"
"        } catch (RuntimeException e) {\n"
"            String message = e.getClass().getSimpleName() + \": \" + e.getMessage();\n"
"            LOGGER.errorf(\"CoffeeResource#availability() invocation #%d failed: %s\", invocationNumber, message);\n"
"            return Response.status(Response.Status.INTERNAL_SERVER_ERROR)\n"
"                    .entity(message)\n"
"                    .type(MediaType.TEXT_PLAIN_TYPE)\n"
"                    .build();\n"
"        }\n"
"    }\n"
"    ...\n"
"}\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:418
msgid "We added another functionality - the application can return the amount of remaining packages of given coffee on our store (just a random number)."
msgstr "もう一つの機能を追加しました。このアプリケーションは、私たちの店における、指定されたコーヒーの残りのパッケージの量を返すことができます（単なる乱数です）。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:421
msgid "This time an artificial failure was introduced in the CDI bean: the `CoffeeRepositoryService#getAvailability()` method is going to alternate between two successful and two failed invocations."
msgstr "今回は、CDIビーンに人工的な失敗を導入しました。 `CoffeeRepositoryService#getAvailability()` メソッドは、2回の成功と2回の失敗の呼び出しを交互に行うことになります。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:425
msgid "We also added a `@CircuitBreaker` annotation with `requestVolumeThreshold = 4`. `CircuitBreaker.failureRatio` is by default 0.5, and `CircuitBreaker.delay` is by default 5 seconds. That means that a circuit breaker will open when 2 of the last 4 invocations failed and it will stay open for 5 seconds."
msgstr "また、 `requestVolumeThreshold = 4` と一緒に `@CircuitBreaker` のアノテーションを追加しました。 `CircuitBreaker.failureRatio` はデフォルトで 0.5 秒、 `CircuitBreaker.delay` はデフォルトで 5 秒です。つまり、過去4回の起動のうち2回が失敗したときにサーキットブレーカーが開き、5秒間その状態が続くということです。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:427
msgid "To test this out, do the following:"
msgstr "これを試すには、次のようにします。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:429
msgid "Go to `http://localhost:8080/coffee/2/availability` in your browser. You should see a number being returned."
msgstr " `http://localhost:8080/coffee/2/availability` をブラウザで開いて下さい。数字が返ってくるのが見えるでしょう。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:430
msgid "Hit refresh, this second request should again be successful and return a number."
msgstr "リフレッシュすると、この2回目のリクエストが再び成功し、数字が返ってくるはずです。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:432
msgid "Refresh two more times. Both times you should see text \"RuntimeException: Service failed.\", which is the exception thrown by `CoffeeRepositoryService#getAvailability()`."
msgstr "さらに2回リフレッシュします。2回とも、\"RuntimeException:Service failed.\" というテキストが表示されます。これは、 `CoffeeRepositoryService#getAvailability()` によってスローされる例外です。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:435
msgid "Refresh a couple more times. Unless you waited too long, you should again see exception, but this time it's \"CircuitBreakerOpenException: getAvailability\". This exception indicates that the circuit breaker opened and the `CoffeeRepositoryService#getAvailability()` method is not being called anymore."
msgstr "さらに数回更新します。長く待ちすぎていなければ、再び例外が表示されるはずですが、今回は \"CircuitBreakerOpenException: getAvailability\" となっています。この例外は、サーキットブレーカーが開き、 `CoffeeRepositoryService#getAvailability()` メソッドが呼び出されなくなったことを示しています。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:437
msgid "Give it 5 seconds during which circuit breaker should close and you should be able to make two successful requests again."
msgstr "5秒後にサーキットブレーカーが閉じて、再び2回のリクエストを成功させることができます。"

#. type: Title ==
#: upstream/_guides/smallrye-fault-tolerance.adoc:438
#, no-wrap
msgid "Runtime configuration"
msgstr "ランタイム設定"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:441
msgid "You can override the annotations parameters at runtime inside your `application.properties` file."
msgstr "`application.properties` ファイルの中で、実行時にアノテーションパラメータをオーバーライドすることができます。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:443
msgid "If we take the retry example that we already saw:"
msgstr "先ほどのリトライの例で言えば"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:447
#, no-wrap
msgid "package org.acme;\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:463
msgid "We can override the `maxRetries` parameter with 6 retries instead of 4 by the following configuration item:"
msgstr "以下の設定項目により、 `maxRetries` パラメータをオーバーライドして、リトライ回数を4回から6回に変更することができます。"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:466
#, no-wrap
msgid "org.acme.CoffeeResource/coffees/Retry/maxRetries=6\n"
msgstr ""

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:470
msgid "The format is `fully-qualified-class-name/method-name/annotation-name/property-name=value`.  You can also configure a property for all the annotation via `annotation-name/property-name=value`."
msgstr "フォーマットは `fully-qualified-class-name/method-name/annotation-name/property-name=value` です。また、 `annotation-name/property-name=value` を通じて、すべてのアノテーションに対するプロパティを設定することもできます。"

#. type: Title ==
#: upstream/_guides/smallrye-fault-tolerance.adoc:471
#, no-wrap
msgid "Conclusion"
msgstr "まとめ"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:475
msgid "SmallRye Fault Tolerance allows to improve resiliency of your application, without having an impact on the complexity of our business logic."
msgstr "SmallRye Fault Toleranceは、ビジネスロジックの複雑さに影響を与えることなく、アプリケーションの耐障害性を向上させます。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:477
msgid "All that is needed to enable the fault tolerance features in Quarkus is:"
msgstr "Quarkusのフォールトトレランス機能を有効にするために必要なのは"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:480
msgid "adding the `smallrye-fault-tolerance` Quarkus extension to your project using the `quarkus-maven-plugin`:"
msgstr "`quarkus-maven-plugin` で `smallrye-fault-tolerance` Quarkus エクステンションをプロジェクトに追加することです :"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:483
msgid "or simply adding the following Maven dependency:"
msgstr "または、以下のMavenの依存関係を単純に追加することもできます。"

#. type: Title ==
#: upstream/_guides/smallrye-fault-tolerance.adoc:500
#, fuzzy, no-wrap
msgid "Additional resources"
msgstr "追加リソース"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:504
#, fuzzy
msgid "SmallRye Fault Tolerance has more features than shown here.  Please check the link:https://smallrye.io/docs/smallrye-fault-tolerance/5.4.0/index.html[SmallRye Fault Tolerance documentation] to learn about them."
msgstr "SmallRye Fault Toleranceには、ここで紹介した以外にも様々な機能があります。それらについては、 link:https://smallrye.io/docs/smallrye-fault-tolerance/5.2.0/index.html[SmallRye Fault Toleranceのドキュメント]をご確認ください。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:506
#, fuzzy
msgid "In Quarkus, you can use the SmallRye Fault Tolerance optional features out of the box."
msgstr "Quarkusでは、SmallRye Fault Toleranceのオプション機能をすぐに使用することができます。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:508
#, fuzzy
msgid "Support for Mutiny is present, so your asynchronous methods can return `Uni` in addition to `CompletionStage`."
msgstr "Mutinyがサポートされているので、非同期のメソッドは `CompletionStage` に加えて `Uni` を返すことができます。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:510
#, fuzzy
msgid "MicroProfile Context Propagation is integrated with Fault Tolerance, so existing contexts are automatically propagated to your asynchronous methods."
msgstr "MicroProfileのContext PropagationはFault Toleranceと統合されており、既存のContextが自動的に非同期メソッドに伝搬されます。"

#. type: delimited block =
#: upstream/_guides/smallrye-fault-tolerance.adoc:515
#, fuzzy
msgid "This also applies to the CDI request context: if it is active on the original thread, it is propagated to the new thread, but if it's not, then the new thread won't have it either.  This is contrary to MicroProfile Fault Tolerance specification, which states that the request context must be active during the `@Asynchronous` method invocation."
msgstr "これは、CDI リクエストコンテキストにも当てはまります。元のスレッドでアクティブであれば、新しいスレッドに伝わりますが、アクティブでなければ、新しいスレッドにも伝わりません。これは MicroProfile Fault Tolerance の仕様に反しており、 `@Asynchronous` メソッドの呼び出し時にリクエストコンテキストがアクティブでなければならないとしています。"

#. type: delimited block =
#: upstream/_guides/smallrye-fault-tolerance.adoc:518
#, fuzzy
msgid "We believe that in presence of MicroProfile Context Propagation, this requirement should not apply.  The entire point of context propagation is to make sure the new thread has the same contexts as the original thread."
msgstr "MicroProfile Context Propagationがある場合、この要件は適用されるべきではないと考えています。コンテキスト伝搬の目的は、新しいスレッドが元のスレッドと同じコンテキストを持っていることを確認することにあります。"

#. type: Plain text
#: upstream/_guides/smallrye-fault-tolerance.adoc:523
#, fuzzy
msgid "Non-compatible mode is enabled by default.  This means that methods that return `CompletionStage` (or `Uni`) have asynchronous fault tolerance applied without any `@Asynchronous`, `@Blocking` or `@NonBlocking` annotation.  It also means that circuit breaker, fallback and retry automatically inspect the exception cause chain if the exception itself is insufficient to decide what should happen."
msgstr "非互換モードはデフォルトで有効になっているので、 `CompletionStage` (または `Uni`) を返すメソッドには、 `@Asynchronous` 、 `@Blocking` 、 `@NonBlocking` のようなアノテーションがなくても、非同期フォールトトレランスが適用されます。"

#. type: delimited block =
#: upstream/_guides/smallrye-fault-tolerance.adoc:528
#, fuzzy
msgid "This mode is not compatible with the MicroProfile Fault Tolerance specification, albeit the incompatibility is very small.  To restore full compatibility, add this configuration property:"
msgstr "このモードは、MicroProfile Fault Tolerance仕様との互換性はありませんが、互換性の低下はごくわずかです。完全な互換性を回復するには、この構成プロパティを追加します。"

#. type: delimited block -
#: upstream/_guides/smallrye-fault-tolerance.adoc:532
#, no-wrap
msgid "smallrye.faulttolerance.mp-compatibility=true\n"
msgstr ""

#. type: delimited block =
#: upstream/_guides/smallrye-fault-tolerance.adoc:537
#, fuzzy
msgid "The link:https://smallrye.io/docs/smallrye-fault-tolerance/5.4.0/usage/programmatic-api.html[programmatic API] is present, including Mutiny support, and integrated with the declarative, annotation-based API.  You can use the `FaultTolerance` and `MutinyFaultTolerance` APIs out of the box."
msgstr "Mutinyのサポートを含む link:https://smallrye.io/docs/smallrye-fault-tolerance/5.3.1/usage/programmatic-api.html[プログラム的なAPIが]存在し、宣言的でアノテーションベースのAPIと統合されています。 `FaultTolerance` と `MutinyFaultTolerance` の API をすぐに使うことができます。"

#. type: delimited block =
#: upstream/_guides/smallrye-fault-tolerance.adoc:538
#, fuzzy
msgid "Support for Kotlin is present (assuming you use the Quarkus extension for Kotlin), so you can guard your `suspend` functions with fault tolerance annotations."
msgstr "Kotlinのサポートがあるため（Kotlin用のQuarkus拡張機能を使用することが前提）、フォールトトレランスのアノテーションで `suspend` 関数を保護することができます。"

#~ msgid "To complete this guide, you need:"
#~ msgstr "このガイドを完成させるには、以下が必要です:"

#~ msgid "less than 15 minutes"
#~ msgstr "15分未満"

#~ msgid "an IDE"
#~ msgstr "IDE"

#~ msgid "JDK 11+ installed with `JAVA_HOME` configured appropriately"
#~ msgstr "JDK 11+ がインストールされ、 `JAVA_HOME`  が適切に設定されていること"

#~ msgid "Apache Maven {maven-version}"
#~ msgstr "Apache Maven {maven-version}"

#~ msgid "./mvnw compile quarkus:dev\n"
#~ msgstr "./mvnw compile quarkus:dev\n"
